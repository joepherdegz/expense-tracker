"use strict";(self.webpackChunkexpense_tracker=self.webpackChunkexpense_tracker||[]).push([[561],{4947:(e,a,s)=>{s.d(a,{v:()=>M});var t=s(2791),r=s(4420),n=s(1134),i=s(6838),o=s(9513),c=s.n(o),l=s(1418),m=s.n(l),d=s(4695),u=(s(8639),s(7689)),_=s(2355),h=s(7997),p=s(5985),x=s(9836),g=s(2796);const y={mainBox:"CategoriesModal_mainBox__Zfe33",box:"CategoriesModal_box__ZGfVW",mainTitle:"CategoriesModal_mainTitle__TN5lI",title:"CategoriesModal_title__7dUMC",listWrapper:"CategoriesModal_listWrapper__U704O",noobjects:"CategoriesModal_noobjects__DgZzo",noobjectsP:"CategoriesModal_noobjectsP__Yh4Zh",listItem:"CategoriesModal_listItem__zk9xA",listSVG:"CategoriesModal_listSVG__eQgow",buttonSVG:"CategoriesModal_buttonSVG__dGXre",icon:"CategoriesModal_icon__dTPTH",labelCategory:"CategoriesModal_labelCategory__L+-6L",inputCategory:"CategoriesModal_inputCategory__BsVb4",subbmitButton:"CategoriesModal_subbmitButton__Xilkt",formStyle:"CategoriesModal_formStyle__TZCQq",inputBox:"CategoriesModal_inputBox__ZojVH"};var j=s(6441),N=s(3329);const b=e=>{let{type:a,transportCategory:s}=e;const n=(0,r.v9)(g.u),i=(0,r.I0)(),o=(0,t.useRef)(null),[c,l]=(0,t.useState)(""),[m,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),[b,T]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{b||l("")}),[b]),(0,N.jsxs)("div",{className:y.mainBox,children:[(0,N.jsxs)("div",{className:y.box,children:[(0,N.jsx)("h2",{className:y.mainTitle,children:"expenses"===a?"Expenses":"Incomes"}),(0,N.jsx)("h3",{className:y.title,children:"All Category"}),(0,N.jsx)("ul",{className:`${y.listWrapper} scroll scrollB`,ref:o,children:0===n[a].length?(0,N.jsx)("li",{className:y.noobjects,children:(0,N.jsx)("p",{className:y.noobjectsP,children:"There are no categories"})}):n[a].map((e=>(0,N.jsxs)("li",{className:y.listItem,children:[(0,N.jsx)("p",{children:e.categoryName}),(0,N.jsxs)("ul",{className:y.listSVG,children:[(0,N.jsx)("li",{className:y.listSVGitem,children:(0,N.jsx)("button",{className:y.buttonSVG,onClick:()=>(e=>{s(e)})(e),children:(0,N.jsx)(_.J,{className:y.icon,name:"check",size:"16"})})}),(0,N.jsx)("li",{children:(0,N.jsx)("button",{className:y.buttonSVG,onClick:()=>((e,a)=>{l(a),h(e),T(!0)})(e._id,e.categoryName),children:(0,N.jsx)(_.J,{className:y.icon,name:"edit",size:"16"})})}),(0,N.jsx)("li",{children:(0,N.jsx)("button",{className:y.buttonSVG,onClick:()=>((e,a)=>{T(!1),d(!0),i((0,x.uu)({id:e,type:a})).unwrap().then((()=>p.Am.success("Category deleted successfully"))).catch((e=>{p.Am.error("Cannot delete category with existing transactions")})).finally(d(!1))})(e._id,a),disabled:m,children:(0,N.jsx)(_.J,{className:y.icon,name:"trash-bin",size:"16"})})})]})]},e._id)))})]}),(0,N.jsxs)("form",{className:y.formStyle,onSubmit:e=>{e.preventDefault(),c.length>16?p.Am.error("Category name length must be less than or equal to 16 characters long"):(b?i((0,x.ht)({categoryName:c,categoryId:u})).unwrap().then((()=>{i((0,j.f1)({type:a})),T(!1)})).catch((e=>p.Am.error("Error editing category"))):i((0,x.i8)({type:a,categoryName:c})).unwrap().then((()=>{p.Am.success("New Category added successfully"),o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})})).catch((e=>p.Am.error("Error adding category"))),l(""))},children:[(0,N.jsx)("label",{className:y.labelCategory,htmlFor:"categoryInput",children:b?"Edit Category":"New Category"}),(0,N.jsxs)("div",{className:y.inputBox,children:[(0,N.jsx)("input",{type:"text",id:"categoryInput",placeholder:"Enter the text",className:y.inputCategory,onChange:e=>{l(e.target.value)},value:c}),(0,N.jsx)("button",{className:y.subbmitButton,type:"submit",disabled:0===c.length,children:b?"Edit":"Add"})]})]})]})};var T=s(1188);const v=e=>{if(!e)return;if("string"===typeof e){const a=e.split("-"),s=parseInt(a[0],10),t=parseInt(a[1],10)-1,r=parseInt(a[2],10);return new Date(s,t,r)}return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`};var f=s(2659),C=s(1755);const F={formWrapper:"TransactionForm_formWrapper__dJW4L",transactionForm:"TransactionForm_transactionForm__sq0n7",commentField:"TransactionForm_commentField__jz17L",typeLabel:"TransactionForm_typeLabel__xEpZh",transactionTypes:"TransactionForm_transactionTypes__+X4q-",customRadioBtn:"TransactionForm_customRadioBtn__LqsSV",radioLabel:"TransactionForm_radioLabel__G3oR-",radioBtn:"TransactionForm_radioBtn__02koV",customFields:"TransactionForm_customFields__ZH0up",customField:"TransactionForm_customField__R60kZ",datePicker:"TransactionForm_datePicker__zE4sc",datepickerContainer:"TransactionForm_datepickerContainer__NhIVf","react-datepicker__calendar":"TransactionForm_react-datepicker__calendar__OSKfp",timeField:"TransactionForm_timeField__zhVdO",categoryField:"TransactionForm_categoryField__rZdjV",fieldWrapper:"TransactionForm_fieldWrapper__rFSik",sumLabel:"TransactionForm_sumLabel__W2tJp",iconDate:"TransactionForm_iconDate__ygxny",iconTime:"TransactionForm_iconTime__F8-gz",sumInput:"TransactionForm_sumInput__4jseR",currency:"TransactionForm_currency__wL7Ly",submitBtn:"TransactionForm_submitBtn__YfJho",errorField:"TransactionForm_errorField__aGdMb",messageError:"TransactionForm_messageError__0Ha4P"},M=e=>{let{transaction:a,transactionsType:s,onSubmitForm:o,history:l}=e;const p=(0,r.v9)(T.dy),x=(0,r.v9)(f.B),{currency:g}=p,[y,j]=(0,t.useState)(""),[M,w]=(0,i.d)(),{register:S,handleSubmit:k,reset:B,setValue:E,getValues:D,control:I,formState:{errors:q},clearErrors:A}=(0,n.cI)({mode:"onChange",resolver:(0,d.X)(C.DT)}),L=(0,u.s0)(),Z=(0,t.useCallback)((e=>{E("category",""),j(""),L(`/transactions/${e}`)}),[E,j,L]),P=(0,t.useCallback)((()=>{E("type",s),E("date",v(new Date)),E("time",(()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`})()),E("category",""),j(""),E("sum",""),E("comment",""),A()}),[E,j,s,A]);(0,t.useEffect)((()=>{if(a||P(),a){const{type:e,date:s,time:t,category:r,sum:n,comment:i}=a;j(null===r||void 0===r?void 0:r._id),E("type",e),E("date",s),E("time",t),E("category",r.categoryName),E("sum",n),E("comment",i)}}),[a,E,P]);const V=e=>{var a;return m()({[`${F["date"!==e?""+(e+"Field"):"datePicker"]}`]:!0,[`${F.errorField}`]:null===(a=q[e])||void 0===a?void 0:a.message})},W=e=>{var a,s;if(null!==(a=q[e])&&void 0!==a&&a.message)return(0,N.jsx)("p",{className:F.messageError,children:null===(s=q[e])||void 0===s?void 0:s.message})},z=m()({[`${F.typeLabel}`]:!0,[`${F.radioLabel}`]:"incomes"===(null===a||void 0===a?void 0:a.type)||"incomes"===l}),J=m()({[`${F.typeLabel}`]:!0,[`${F.radioLabel}`]:"expenses"===(null===a||void 0===a?void 0:a.type)||"expenses"===l});return(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:F.formWrapper,children:(0,N.jsxs)("form",{className:F.transactionForm,onSubmit:k((e=>{e.category=y,a&&(e._id=a._id),o(e),x||a||(B(),P())})),children:[(0,N.jsxs)("div",{className:F.transactionTypes,children:[(0,N.jsxs)("label",{className:z,children:[(0,N.jsx)("input",{className:F.radioBtn,type:"radio",name:"type",value:"expenses",...S("type"),disabled:"incomes"===(null===a||void 0===a?void 0:a.type)||"incomes"===l,onChange:()=>Z("expenses")}),(0,N.jsx)("span",{className:F.customRadioBtn}),"Expense"]}),(0,N.jsxs)("label",{className:J,children:[(0,N.jsx)("input",{className:F.radioBtn,type:"radio",name:"type",value:"incomes",...S("type"),disabled:"expenses"===(null===a||void 0===a?void 0:a.type)||"expenses"===l,onChange:()=>Z("incomes")}),(0,N.jsx)("span",{className:F.customRadioBtn}),"Income"]})]}),(0,N.jsxs)("div",{className:F.customFields,children:[(0,N.jsxs)("label",{className:F.customField,children:["Date",(0,N.jsx)(n.Qr,{control:I,name:"date",render:e=>{let{field:a}=e;return(0,N.jsx)("div",{className:"datepickerContainer",children:(0,N.jsx)(c(),{className:V("date"),showPopperArrow:!1,maxDate:new Date,selected:a.value,placeholderText:"mm/dd/yyyy",onChange:e=>{a.onChange(e),(e=>{const a=v(e);E("date",a,{shouldValidate:!0})})(e)},calendarClassName:"fixed-height-calendar"})})}}),(0,N.jsx)(_.J,{name:"calendar",className:F.iconDate,size:"16"}),W("date")]}),(0,N.jsxs)("label",{className:F.customField,children:["Time",(0,N.jsx)("input",{className:V("time"),type:"time",name:"time",...S("time")}),(0,N.jsx)(_.J,{name:"clock",className:F.iconTime,size:"16"}),W("time")]})]}),(0,N.jsxs)("div",{className:F.fieldWrapper,children:[(0,N.jsx)("label",{children:"Category"}),(0,N.jsx)("input",{className:V("category"),type:"text",name:"category",placeholder:"Different",autoComplete:"off",...S("category"),required:!0,readOnly:!0,onClick:w}),W("category")]}),(0,N.jsx)("div",{children:(0,N.jsxs)("label",{className:F.sumLabel,children:["Sum",(0,N.jsx)("input",{className:V("sum"),type:"number",name:"sum",placeholder:"Enter the sum",autoComplete:"off",...S("sum")}),(0,N.jsx)("span",{className:F.currency,children:null===g||void 0===g?void 0:g.toUpperCase()}),W("sum")]})}),(0,N.jsxs)("div",{className:F.fieldWrapper,children:[(0,N.jsx)("label",{children:"Comment"}),(0,N.jsx)("textarea",{className:V("comment"),name:"comment",placeholder:"Enter the text",...S("comment")}),W("comment")]}),(0,N.jsx)("button",{className:F.submitBtn,type:"submit",disabled:Object.entries(q).length,children:a?"Save":"Add"})]})}),M&&(0,N.jsx)(h.u,{toggleModal:w,children:(0,N.jsx)(b,{transportCategory:e=>{E("category",e.categoryName,{shouldValidate:!0}),j(e._id),w()},type:D("type")})})]})}},6963:(e,a,s)=>{s.d(a,{O:()=>d});var t=s(7689),r=s(1087),n=s(4420),i=s(2791),o=s(2355),c=s(1188);const l={link:"TransactionTotal_link__2oJzz",iconContainer:"TransactionTotal_iconContainer__BJGwF",icon:"TransactionTotal_icon__Q-Kmf",list:"TransactionTotal_list__jrKhT",listItem:"TransactionTotal_listItem__cmNcW",amountTitle:"TransactionTotal_amountTitle__O02xF",amountDescr:"TransactionTotal_amountDescr__QwBck"};var m=s(3329);const d=e=>{let{totalAllExpenses:a=null,totalAllIncomes:s=null}=e;const[d,u]=(0,i.useState)({}),_=(0,t.TH)(),{totalIncomes:h,totalExpenses:p,currency:x}=(0,n.v9)(c.dy),g=function(e){switch(e){case"uah":return"\u20b1";case"usd":return"$";case"eur":return"\u20ac"}}(x);return(0,i.useEffect)((()=>{u(function(e){const a={};return"/transactions/incomes"===e.pathname||"/transactions/expenses"===e.pathname?(a.expenses="/transactions/expenses",a.incomes="/transactions/incomes"):(a.expenses="/transactions/history/expenses",a.incomes="/transactions/history/incomes"),a}(_))}),[_]),(0,m.jsx)("div",{className:l.wrapper,children:(0,m.jsxs)("ul",{className:l.list,children:[(0,m.jsxs)("li",{className:l.listItem,children:[(0,m.jsx)(r.rU,{className:l.link,to:d.incomes,children:(0,m.jsx)("div",{className:l.iconContainer,children:(0,m.jsx)(o.J,{className:l.icon,name:"arrow-up",size:"18"})})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:l.amountTitle,children:"Total Income"}),(0,m.jsxs)("p",{className:l.amountDescr,children:[g,s||h]})]})]}),(0,m.jsxs)("li",{className:l.listItem,children:[(0,m.jsx)(r.rU,{className:l.link,to:d.expenses,children:(0,m.jsx)("div",{className:l.iconContainer,children:(0,m.jsx)(o.J,{className:l.icon,name:"arrow-down",size:"18"})})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:l.amountTitle,children:"Total Expense"}),(0,m.jsxs)("p",{className:l.amountDescr,children:[g,a||p]})]})]})]})})}},9799:(e,a,s)=>{s.r(a),s.d(a,{default:()=>O});var t=s(7689),r=s(2791),n=s(4420),i=s(5985),o=s(9302),c=s(4947),l=s(7873),m=s(5390),d=s(1048),u=s(3329);const _=e=>{let{data:a}=e;const s=(0,r.useMemo)((()=>a),[a]);return(0,u.jsx)(l.u,{width:292,height:150,children:(0,u.jsx)(m.b,{dataKey:"value",data:s,startAngle:180,endAngle:0,cy:140,innerRadius:95,outerRadius:145,paddingAngle:-10,cornerRadius:10,fill:"#15151b",stroke:"none",children:s.map(((e,a)=>(0,u.jsx)(d.b,{style:{outline:"none"},fill:e.color},`cell-${a}`)))})})};var h=s(6712),p=s(5962),x=s(3540);function g(e,a){if(!e.length)return[];const s={},{firstDayOfMonth:t,lastDayOfMonth:r}=function(){const e=new Date;return{firstDayOfMonth:(0,h.WU)((0,p.N)(e),"yyyy-MM-dd"),lastDayOfMonth:(0,h.WU)((0,x.V)(e),"yyyy-MM-dd")}}(),n=e.filter((e=>e.date>=t&&e.date<=r));if(!n.length)return[];n.forEach((e=>{const{category:a,sum:t}=e;s[a.categoryName]?s[a.categoryName]+=t:s[a.categoryName]=t}));const i=[];Object.entries(s).forEach((e=>{let[s,t]=e,r=Number((t/a*100).toFixed(1));i.push({name:s,value:r})}));const o=i.reduce(((e,a)=>e+a.value),0),c=i.sort(((e,a)=>a.value-e.value));if(100!==o){const e=100-o;c[c.length-1].value>1?c[c.length-1].value=Number((c[c.length-1].value+e).toFixed(1)):c[c.length-1].value=.1}return function(e){const a=["#008000 ","#32CD32","#00FA9A","#98FB98","#228B22","#2E8B57","#3CB371","#00FF7F","#66CDAA","#8FBC8F","#2F4F4F","#aabaaa","#dbf0db","#777f77","#5a5e5a"];return e.map(((e,s)=>e.color=a[s])),e}(c)}var y=s(2659),j=s(1188);const N=s.p+"static/media/no_data_abstract.c1edeb6c447e9b6d47cc.png",b=s.p+"static/media/server-error.e6bec05450fa8b4741c9.png",T="TransactionChart_chartContainer__GLUxm",v="TransactionChart_title__BL9aZ",f="TransactionChart_statsWrapper__3UYDj",C="TransactionChart_pieChartWrapper__foBJb",F="TransactionChart_chartDescr__mCZQM",M="TransactionChart_list__ONJJT",w="TransactionChart_listItem__uDZ6L",S="TransactionChart_wrapperMarker__FBrKQ",k="TransactionChart_itemDescr__PpZj8",B="TransactionChart_itemSpan__zfztx",E="TransactionChart_warningWrapper__Vjs-x",D="TransactionChart_warningTitle__thcWl",I="TransactionChart_imgNoData__+7BQP",q="TransactionChart_imgNoTransactions__XrsFp",A=e=>{let{transactionsType:a}=e;const[s,t]=(0,r.useState)(null),i=(0,n.I0)(),{totalIncomes:c,totalExpenses:l}=(0,n.v9)(j.dy),m=(0,n.v9)(y.B),d=(0,n.v9)(y.ig),h=(0,r.useRef)("Incomes"===a?c:l);if((0,r.useEffect)((()=>{h.current="Incomes"===a?c:l}),[c,l,a]),(0,r.useEffect)((()=>{null!==d&&i((0,o.k)()).unwrap().then((()=>{t(g(d,h.current))})).catch()}),[d,i]),null!==d&&null!==s)return m?(0,u.jsxs)("div",{className:E,children:[(0,u.jsx)("h2",{className:D,children:"Sorry, something went wrong. Please try again..."}),(0,u.jsx)("img",{className:I,src:b,alt:"Error fetch"})]}):s.length?(0,u.jsxs)("div",{className:T,children:[(0,u.jsxs)("h3",{className:v,children:[a," categories"]}),(0,u.jsxs)("div",{className:f,children:[(0,u.jsxs)("div",{className:C,children:[(0,u.jsx)(_,{data:s}),(0,u.jsx)("p",{className:F,children:"100%"})]}),(0,u.jsx)("ul",{className:`${M} scroll scrollA`,children:s.map(((e,a)=>(0,u.jsxs)("li",{className:w,children:[(0,u.jsx)("div",{className:S,style:{backgroundColor:e.color}}),(0,u.jsx)("p",{className:k,children:e.name}),(0,u.jsxs)("p",{className:B,children:[e.value,"%"]})]},a)))})]})]}):(0,u.jsxs)("div",{className:E,children:[(0,u.jsxs)("h2",{className:D,children:["You don't have any ",a.toLowerCase()," in this month."]}),(0,u.jsx)("img",{className:q,src:N,alt:"No data"})]})};var L=s(6963),Z=s(6441);const P="MainTransactionPage_wrapper__fe6+4",V="MainTransactionPage_title__MPnmq",W="MainTransactionPage_descr__CFHv2",z="MainTransactionPage_titleWrapper__uQPxF",J="MainTransactionPage_total__XrKGx",$="MainTransactionPage_form__yn+wM",G="MainTransactionPage_chart__0aNX7",O=()=>{const e=(0,n.I0)(),{transactionsType:a}=(0,t.UO)();(0,r.useEffect)((()=>{e((0,Z.f1)({type:a}))}),[e,a]);const s=a[0].toUpperCase()+a.slice(1);return(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:P,children:[(0,u.jsxs)("div",{className:z,children:[(0,u.jsxs)("h2",{className:V,children:[s.slice(0,-1)," Log"]}),(0,u.jsx)("p",{className:W,children:"Capture and organize every penny spent with ease! A clear view of your financial habits at your fingertips."})]}),(0,u.jsx)("div",{className:J,children:(0,u.jsx)(L.O,{})}),(0,u.jsx)("div",{className:$,children:(0,u.jsx)(c.v,{transactionsType:a,onSubmitForm:a=>{e((0,Z.dT)(a)).unwrap().then((()=>{e((0,o.k)()),i.Am.success("Transaction added successfully!")})).catch((e=>{i.Am.error("Something went wrong!")}))}})}),(0,u.jsx)("div",{className:G,children:(0,u.jsx)(A,{transactionsType:s})})]})})}},1755:(e,a,s)=>{s.d(a,{DT:()=>i,JJ:()=>r,wL:()=>n});var t=s(8007);const r=t.Ry({name:t.Z_().required("Name is required").min(2,"Min length must be more than 2 chars").max(32,"Max length must be less than 32 chars"),email:t.Z_().email("Enter a valid Email").required("Email is required").max(64,"Max length must be less than 64 chars"),password:t.Z_().required("Password is required").min(8,"Min length must be more than 8 chars").max(64,"Max length must be less than 64 chars")}),n=t.Ry().shape({email:t.Z_().email("Enter a valid Email").required("Email is required").max(64,"Max length must be less than 64 chars"),password:t.Z_().required("Password is required").min(8,"Min length must be more than 8 chars").max(64,"Max length must be less than 64 chars")}),i=t.Ry({date:t.Z_().required("Date is required"),time:t.Z_().required("Time is required"),category:t.Z_().required("Category is required"),sum:t.Z_().matches(/^[1-9][0-9]*$/,"Sum must be greater than 0").test("max","Sum must be less than or equal to 1000000",(e=>{if(!e)return!0;const a=parseInt(e,10);return!isNaN(a)&&a<=1e6})).required("Sum is required"),comment:t.Z_().required("Comment is required").min(3,"Comment length must be at least 3 characters long")})}}]);
//# sourceMappingURL=561.d106720e.chunk.js.map